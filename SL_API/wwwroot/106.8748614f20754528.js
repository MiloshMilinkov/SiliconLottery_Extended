"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[106],{3106:(E,m,i)=>{i.r(m),i.d(m,{CheckoutModule:()=>B});var p=i(6895),u=i(6949),c=i(433),e=i(1571),f=i(9479),v=i(5053),l=i(77);function x(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"li",4)(1,"div",5)(2,"button",6),e.NdJ("click",function(){const a=e.CHM(t).index,d=e.oxw();return e.KtG(d.onClick(a))}),e._uU(3),e.qZA()()()}if(2&o){const t=r.$implicit,n=r.index,s=e.oxw();e.xp6(2),e.ekj("active",s.selectedIndex===n),e.xp6(1),e.hij(" ",t.label," ")}}function C(o,r){if(1&o&&(e.TgZ(0,"div"),e.GkF(1,7),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",t.selected.content)}}let _=(()=>{class o extends l.B8{constructor(){super(...arguments),this.linearModeSelected=!0}ngOnInit(){this.linear=this.linearModeSelected}onClick(t){this.selectedIndex=t}}return o.\u0275fac=function(){let r;return function(n){return(r||(r=e.n5z(o)))(n||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["app-stepper"]],inputs:{linearModeSelected:"linearModeSelected"},features:[e._Bn([{provide:l.B8,useExisting:o}]),e.qOj],decls:4,vars:2,consts:[[1,"container"],[1,"nav","nav-pills","nav-justified"],["class","nav-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nav-item"],[1,"grid"],[1,"nav-link","py-3","text-uppercase","fw-bold",3,"click"],[3,"ngTemplateOutlet"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"ul",1),e.YNc(2,x,4,3,"li",2),e.qZA(),e.YNc(3,C,2,1,"div",3),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngForOf",n.steps),e.xp6(1),e.Q6J("ngIf",n.selected))},dependencies:[p.sg,p.O5,p.tP],styles:['@import"https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap";bitton.nav-link[_ngcontent-%COMP%]{background:#e9ecef;border-radius:0;border:none;color:#333}.container[_ngcontent-%COMP%]{background-color:#202020;padding:20px;font-family:Orbitron,sans-serif}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{background:transparent;border-radius:4px;color:#fff;margin-right:10px;transition:background-color .3s,color .3s}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:#b44593;color:#fff;box-shadow:0 0 10px #b44593}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{background-color:#ff66c4;color:#202020;box-shadow:0 0 15px #ff66c4}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:10px 20px;font-size:1rem;font-weight:700;text-transform:uppercase;letter-spacing:1px}@media (max-width: 768px){.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{margin-right:5px;padding:8px 15px}}']}),o})();var b=i(7185),h=i(4015);function Z(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"h4"),e._uU(3,"Shipping address"),e.qZA(),e.TgZ(4,"button",8),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.saveUserAddress())}),e._uU(5," Save as default address "),e.qZA()(),e.TgZ(6,"div",9)(7,"div",10),e._UZ(8,"app-text-input",11),e.qZA(),e.TgZ(9,"div",10),e._UZ(10,"app-text-input",12),e.qZA(),e.TgZ(11,"div",10),e._UZ(12,"app-text-input",13),e.qZA(),e.TgZ(13,"div",10),e._UZ(14,"app-text-input",14),e.qZA()()()}if(2&o){const t=e.oxw();let n;e.Q6J("formGroup",t.checkoutForm),e.xp6(4),e.Q6J("disabled",!(null!=(n=t.checkoutForm.get("addressForm"))&&n.valid&&null!=(n=t.checkoutForm.get("addressForm"))&&n.dirty)),e.xp6(4),e.Q6J("label","Street name"),e.xp6(2),e.Q6J("label","Street number"),e.xp6(2),e.Q6J("label","City"),e.xp6(2),e.Q6J("label","Zip code")}}let y=(()=>{class o{constructor(t,n){this.accountService=t,this.toaster=n}saveUserAddress(){this.accountService.updateUserAddress(this.checkoutForm?.get("addressForm")?.value).subscribe({next:()=>{this.toaster.success("Address saved"),this.checkoutForm?.get("addressForm")?.reset(this.checkoutForm?.get("addressForm")?.value)}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.B),e.Y36(b._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-checkout-address"]],inputs:{checkoutForm:"checkoutForm"},decls:8,vars:1,consts:[["class","mt-4",3,"formGroup",4,"ngIf"],[1,"d-flex","justify-content-between","flex-row","mb-5"],["routerLink","/basket",1,"btn"],[1,"fa","fa-angle-left"],["cdkStepperNext","",1,"btn","btn-primary"],[1,"fa","fa-angle-right"],[1,"mt-4",3,"formGroup"],[1,"d-flex","justify-content-between","align-item-center"],[1,"btn-save","mb-3",3,"disabled","click"],["formGroupName","addressForm",1,"row"],[1,"form-group","col-6"],["formControlName","streetName",3,"label"],["formControlName","streetNumber",3,"label"],["formControlName","city",3,"label"],["formControlName","zipCode",3,"label"]],template:function(t,n){1&t&&(e.YNc(0,Z,15,6,"div",0),e.TgZ(1,"div",1)(2,"button",2),e._UZ(3,"i",3),e._uU(4," Back to basket "),e.qZA(),e.TgZ(5,"button",4),e._uU(6," Go to Delivery "),e._UZ(7,"i",5),e.qZA()()),2&t&&e.Q6J("ngIf",n.checkoutForm)},dependencies:[p.O5,u.rH,c.JJ,c.JL,c.sg,c.u,c.x0,h.t,l.st],styles:["h4[_ngcontent-%COMP%]{color:#fff;text-shadow:0 0 5px #b44593,0 0 10px #b44593,0 0 20px #b44593,0 0 40px #b44593}button[_ngcontent-%COMP%]{background-color:#b44593;border:none;color:#fff}button[_ngcontent-%COMP%]:hover{background-color:#b44593;color:#fff;box-shadow:0 0 5px #b44593,0 0 10px #b44593,0 0 20px #b44593,0 0 40px #b44593}.btn-save[_ngcontent-%COMP%]{background-color:#b44593;border:none;color:#fff;border-radius:5px}.btn-save[_ngcontent-%COMP%]:disabled{background-color:#d486bd;color:#fff;cursor:not-allowed;border-radius:5px}"]}),o})();var F=i(2340),M=i(4004),O=i(529);let g=(()=>{class o{constructor(t){this.http=t,this.baseUrl=F.N.apiUrl}getDeliveryMethods(){return this.http.get(this.baseUrl+"orders/deliveries").pipe((0,M.U)(t=>t.sort((n,s)=>s.price-n.price)))}createOrder(t){return this.http.post(this.baseUrl+"orders",t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(O.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var k=i(5866);function T(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",9)(1,"input",10),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.setShippingPrice(a))}),e.qZA(),e.TgZ(2,"label",11)(3,"strong"),e._uU(4),e.ALo(5,"currency"),e.qZA(),e._UZ(6,"br"),e.TgZ(7,"span",12),e._uU(8),e.qZA()()()}if(2&o){const t=r.$implicit;e.xp6(1),e.s9C("value",t.id),e.s9C("id",t.id),e.xp6(1),e.s9C("for",t.id),e.xp6(2),e.AsE("",t.shortName," - ",e.lcZ(5,6,t.price),""),e.xp6(4),e.Oqu(t.description)}}function A(o,r){if(1&o&&(e.TgZ(0,"div",6)(1,"div",7),e.YNc(2,T,9,8,"div",8),e.qZA()()),2&o){const t=e.oxw();e.Q6J("formGroup",t.checkoutForm),e.xp6(2),e.Q6J("ngForOf",t.deliveryMethods)}}let P=(()=>{class o{constructor(t,n){this.checkoutService=t,this.basketService=n,this.deliveryMethods=[]}ngOnInit(){this.checkoutService.getDeliveryMethods().subscribe({next:t=>this.deliveryMethods=t})}setShippingPrice(t){this.basketService.setShippingPrice(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g),e.Y36(k.v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-checkout-delivery"]],inputs:{checkoutForm:"checkoutForm"},decls:8,vars:1,consts:[["class","mt-4",3,"formGroup",4,"ngIf"],[1,"d-flex","justify-content-between","flex-row","mb-5"],["cdkStepperPrevious","",1,"btn","btn-outline-primary"],[1,"fa","fa-angle-left"],["cdkStepperNext","",1,"btn","btn-primary"],[1,"fa","fa-angle-right"],[1,"mt-4",3,"formGroup"],["formGroupName","deliveryForm",1,"row"],["class","col-6 form-group",4,"ngFor","ngForOf"],[1,"col-6","form-group"],["type","radio","formControlName","delivery",1,"form-check-input",3,"value","id","click"],[1,"form-check-label","ms-2","mb-3",3,"for"],[1,"label-description"]],template:function(t,n){1&t&&(e.YNc(0,A,3,2,"div",0),e.TgZ(1,"div",1)(2,"button",2),e._UZ(3,"i",3),e._uU(4," Back to address "),e.qZA(),e.TgZ(5,"button",4),e._uU(6," Go to Review "),e._UZ(7,"i",5),e.qZA()()),2&t&&e.Q6J("ngIf",n.checkoutForm)},dependencies:[p.sg,p.O5,c.Fj,c._,c.JJ,c.JL,c.sg,c.u,c.x0,l.st,l.po,p.H9],styles:['h4[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{color:#fff;text-shadow:0 0 5px #b44593,0 0 10px #b44593,0 0 20px #b44593,0 0 40px #b44593}button[_ngcontent-%COMP%]{background-color:#b44593;border:none;color:#fff}button[_ngcontent-%COMP%]:hover{background-color:#b44593;color:#fff;box-shadow:0 0 5px #b44593,0 0 10px #b44593,0 0 20px #b44593,0 0 40px #b44593}.label-description[_ngcontent-%COMP%]{color:#fff}.label-description[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{text-transform:uppercase}.form-check-input[_ngcontent-%COMP%]{opacity:0;position:fixed;width:0}.form-check-input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{content:"";display:inline-block;margin-right:10px;border:3px solid #b44593;background-color:#fff;border-radius:50%;width:20px;height:20px;vertical-align:bottom;transition:background-color .2s,border-color .2s}.form-check-input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{background-color:#b44593}']}),o})();function S(o,r){if(1&o&&(e.TgZ(0,"form",9),e._uU(1,"> "),e.TgZ(2,"div",10)(3,"div",11),e._UZ(4,"app-text-input",12),e.qZA(),e.TgZ(5,"div",11),e._UZ(6,"app-text-input",13),e.qZA(),e.TgZ(7,"div",11),e._UZ(8,"app-text-input",14),e.qZA(),e.TgZ(9,"div",11),e._UZ(10,"app-text-input",15),e.qZA()()()),2&o){const t=e.oxw();e.Q6J("formGroup",t.checkoutForm),e.xp6(4),e.Q6J("label","Card Number"),e.xp6(2),e.Q6J("label","Expiry Month"),e.xp6(2),e.Q6J("label","Expiry Year"),e.xp6(2),e.Q6J("label","CVV")}}let w=(()=>{class o{constructor(t,n,s,a){this.basketService=t,this.checkoutService=n,this.toastr=s,this.router=a}submitOrder(){const t=this.basketService.getCurrentBasketValue();if(!t)return;const n=this.getOrderToCreate(t);n&&this.checkoutService.createOrder(n).subscribe({next:s=>{this.toastr.success("Order created successfully"),this.basketService.deleteLocalbasket(),this.router.navigate(["checkout/success"],{state:s})}})}getOrderToCreate(t){const n=this.checkoutForm?.get("deliveryForm")?.get("delivery")?.value,s=this.checkoutForm?.get("addressForm")?.value;if(n&&s)return{basketId:t.id,deliveryMethodId:n,shipToAddress:s}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k.v),e.Y36(g),e.Y36(b._W),e.Y36(u.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-checkout-payment"]],inputs:{checkoutForm:"checkoutForm"},decls:12,vars:2,consts:[[2,"display","flex","align-items","center"],["src","/assets/Images/notFoundImage.png","alt","",2,"width","185px"],[2,"color","white","font-weight","bolder"],[3,"formGroup",4,"ngIf"],[1,"d-flex","justify-content-between","flex-row","mb-5","mt-5"],["cdkStepperPrevious","",1,"btn","btn-outline-primary"],[1,"fa","fa-angle-left"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-angle-right"],[3,"formGroup"],["formGroupName","paymentForm"],[1,"form-group","col-6"],["formControlName","cardNumber",3,"label"],["formControlName","expiryMonth",3,"label"],["formControlName","expiryYear",3,"label"],["formControlName","cvv",3,"label"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"p",2),e._uU(3,"PAYMENT METHODS ARE IN DEVELOPMENT!"),e.qZA()(),e.YNc(4,S,11,5,"form",3),e.TgZ(5,"div",4)(6,"button",5),e._UZ(7,"i",6),e._uU(8," Back to review "),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return n.submitOrder()}),e._uU(10," Submit Order "),e._UZ(11,"i",8),e.qZA()()),2&t){let s;e.xp6(4),e.Q6J("ngIf",n.checkoutForm),e.xp6(5),e.Q6J("disabled",!(null!=n.checkoutForm&&null!=(s=n.checkoutForm.get("paymentForm"))&&s.valid))}},dependencies:[p.O5,c._Y,c.JJ,c.JL,c.sg,c.u,c.x0,h.t,l.po],styles:["h4[_ngcontent-%COMP%]{color:#fff;text-shadow:0 0 5px #b44593,0 0 10px #b44593,0 0 20px #b44593,0 0 40px #b44593}button[_ngcontent-%COMP%]{background-color:#b44593;border:none;color:#fff}button[_ngcontent-%COMP%]:hover{background-color:#b44593;color:#fff;box-shadow:0 0 5px #b44593,0 0 10px #b44593,0 0 20px #b44593,0 0 40px #b44593}"]}),o})();var U=i(8795);let J=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-checkout-review"]],decls:9,vars:1,consts:[[1,"mt-4"],[3,"isBasket"],[1,"d-flex","justify-content-between","flex-row","mb-5"],["cdkStepperPrevious","",1,"btn","btn-outline-primary"],[1,"fa","fa-angle-left"],["cdkStepperNext","",1,"btn","btn-primary"],[1,"fa","fa-angle-right"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-basket-summary",1),e.qZA(),e.TgZ(2,"div",2)(3,"button",3),e._UZ(4,"i",4),e._uU(5," Back to delivery "),e.qZA(),e.TgZ(6,"button",5),e._uU(7," Go to Payment "),e._UZ(8,"i",6),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("isBasket",!1))},dependencies:[l.st,l.po,U.b],styles:["h4[_ngcontent-%COMP%]{color:#fff;text-shadow:0 0 5px #b44593,0 0 10px #b44593,0 0 20px #b44593,0 0 40px #b44593}button[_ngcontent-%COMP%]{background-color:#b44593;border:none;color:#fff}button[_ngcontent-%COMP%]:hover{background-color:#b44593;color:#fff;box-shadow:0 0 5px #b44593,0 0 10px #b44593,0 0 20px #b44593,0 0 40px #b44593}th[_ngcontent-%COMP%]{background-color:red}"]}),o})();function N(o,r){if(1&o&&(e.TgZ(0,"button",7),e._uU(1," View your order "),e.qZA()),2&o){const t=e.oxw();e.MGl("routerLink","/orders/",t.order.id,"")}}function q(o,r){1&o&&(e.TgZ(0,"button",8),e._uU(1,"View your orders"),e.qZA())}const Q=[{path:"",component:(()=>{class o{constructor(t,n){this.fb=t,this.accountService=n,this.checkoutForm=this.fb.group({addressForm:this.fb.group({streetName:["",c.kI.required],streetNumber:["",c.kI.required],city:["",c.kI.required],zipCode:["",c.kI.required]}),deliveryForm:this.fb.group({delivery:["",c.kI.required]}),paymentForm:this.fb.group({cardNumber:["",[c.kI.required,c.kI.pattern(/^\d{16}$/)]],expiryMonth:["",[c.kI.required,c.kI.pattern(/^(0[1-9]|1[0-2])$/)]],expiryYear:["",[c.kI.required,c.kI.pattern(/^\d{4}$/)]],cvv:["",[c.kI.required,c.kI.pattern(/^\d{3}$/)]]})})}ngOnInit(){this.getAddressFormValues()}getAddressFormValues(){this.accountService.getUserAddress().subscribe({next:t=>{t&&this.checkoutForm.get("addressForm")?.patchValue(t)}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.qu),e.Y36(f.B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-checkout"]],decls:15,vars:11,consts:[[1,"container","mt-5","app-stepper"],[1,"row"],[1,"col-8"],[3,"linearModeSelected"],["appStepper",""],[3,"label","completed"],[3,"checkoutForm"],[3,"label"],[1,"col-4"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-stepper",3,4)(5,"cdk-step",5),e._UZ(6,"app-checkout-address",6),e.qZA(),e.TgZ(7,"cdk-step",5),e._UZ(8,"app-checkout-delivery",6),e.qZA(),e.TgZ(9,"cdk-step",7),e._UZ(10,"app-checkout-review"),e.qZA(),e.TgZ(11,"cdk-step",5),e._UZ(12,"app-checkout-payment",6),e.qZA()()(),e.TgZ(13,"div",8),e._UZ(14,"app-order-totals"),e.qZA()()()),2&t){let s,a,d;e.xp6(3),e.Q6J("linearModeSelected",!1),e.xp6(2),e.Q6J("label","Address")("completed",null==(s=n.checkoutForm.get("addressForm"))?null:s.valid),e.xp6(1),e.Q6J("checkoutForm",n.checkoutForm),e.xp6(1),e.Q6J("label","Delivery")("completed",null==(a=n.checkoutForm.get("deliveryForm"))?null:a.valid),e.xp6(1),e.Q6J("checkoutForm",n.checkoutForm),e.xp6(1),e.Q6J("label","Review"),e.xp6(2),e.Q6J("label","Payment")("completed",null==(d=n.checkoutForm.get("paymentForm"))?null:d.valid),e.xp6(1),e.Q6J("checkoutForm",n.checkoutForm)}},dependencies:[v.S,_,l.be,y,P,w,J]}),o})()},{path:"success",component:(()=>{class o{constructor(t){this.router=t;const n=this.router.getCurrentNavigation();this.order=n?.extras?.state}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-checkout-success"]],decls:11,vars:2,consts:[[1,"container","mt-5"],[2,"display","flex","align-items","center"],["src","/assets/Images/notFoundImage.png","alt","",2,"width","185px"],[1,"fa","fa-check-circle","fa-5x",2,"color","white"],[1,"notShippedInfo","mb-4","mt-5"],["class","btn btn-outline-success",3,"routerLink",4,"ngIf"],["routerLink","/orders","class","btn btn-outline-success",4,"ngIf"],[1,"btn","btn-outline-success",3,"routerLink"],["routerLink","/orders",1,"btn","btn-outline-success"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.TgZ(3,"div"),e._UZ(4,"i",3),e.qZA(),e.TgZ(5,"h2"),e._uU(6,"Thank you. Your order is confirmed"),e.qZA()(),e.TgZ(7,"p",4),e._uU(8,"Your order has not shipped yet, but this is to be expected as we are not a real store!"),e.qZA(),e.YNc(9,N,2,1,"button",5),e.YNc(10,q,2,0,"button",6),e.qZA()),2&t&&(e.xp6(9),e.Q6J("ngIf",n.order),e.xp6(1),e.Q6J("ngIf",!n.order))},dependencies:[p.O5,u.rH],styles:["h4[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{color:#fff;text-shadow:0 0 5px #b44593,0 0 10px #b44593,0 0 20px #b44593,0 0 40px #b44593}button[_ngcontent-%COMP%]{background-color:#b44593;border:none;color:#fff}button[_ngcontent-%COMP%]:hover{background-color:#b44593;color:#fff;box-shadow:0 0 5px #b44593,0 0 10px #b44593,0 0 20px #b44593,0 0 40px #b44593}h2[_ngcontent-%COMP%]{margin-left:20px}.fa[_ngcontent-%COMP%]{color:#fff;text-shadow:0 0 5px #b44593,0 0 10px #b44593,0 0 20px #b44593,0 0 40px #b44593}.notShippedInfo[_ngcontent-%COMP%]{text-transform:uppercase;color:#fff;font-weight:bolder}"]}),o})()}];let Y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(Q),u.Bz]}),o})();var G=i(4466);let B=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.ez,Y,G.m]}),o})()}}]);